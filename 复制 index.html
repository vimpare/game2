<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link href="style.css" rel="stylesheet" />
	</head>

	<body>
		<div class="box">
			<div class="main">

			</div>

			<input type="button" value="新建文件夹" class="btn1" />
			<input type="button" value="删除文件夹" class="btn2" />
		</div>

		<script src="./utils.js"></script>
		<script>
			var main = $(".main")[0];
			var item = $(".item");
			var mark = $(".mark");
			var span = $("span");
			var btn1 = $('.btn1')[0]
			var btn2 = $('.btn2')[0]
			var arr = [];
			//新建文件夹
			btn1.onclick = function() {
				var item = document.createElement("div");
				var mark = document.createElement("div");
				var kuang = document.createElement("div");
				var span = document.createElement("span");
				var items = main.children;
				console.log(item)
				if(items.length >= 3) {

				} else {

					item.className = "item";
					mark.className = "mark";
					kuang.className = "kuang";
					kuang.innerHTML = "新建文件夹";
					item.appendChild(mark); //在其中插入背景
					item.appendChild(kuang); //插入内容框
					kuang.appendChild(span); //插入标记		
					span.setAttribute("state", "false")
					main.appendChild(item);
					tab();
				}
			}

			//删除文件夹
			btn2.onclick = function() {
				if(arr.length > 0) {
					for(var i = 0; i < arr.length; i++) {
						arr[i].remove();
					}
					tab()
				}

			}

			function tab() {
				for(var i = 0; i < item.length; i++) {

					item[i].index = i
					span[i].index2 = i
					//鼠标移入
					item[i].onmouseover = function() {
						mark[this.index].style.display = "block";
						span[this.index].style.display = "block";
					};

					//鼠标移出
					item[i].onmouseout = function() {
						if(!span[this.index].state) {
							mark[this.index].style.display = "none";
							span[this.index].style.display = "none";
						}
					};
					//鼠标点击
					span[i].onclick = function() {

						if(!this.state) {
							this.style.background = "url(./images/4.png)";
							this.state = true;
							arr.push(item[this.index2]);
							console.log(arr)
						} else {
							this.style.background = "";
							this.state = false;
							console.log(item[this.index2])
							arr.splice(item[this.index2], 1);
						}

					};
				}

			}
		</script>
	</body>

</html>